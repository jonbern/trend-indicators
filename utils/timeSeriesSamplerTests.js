'use strict';
const expect = require('expectations');
const mas = require('./timeSeriesSampler');

describe('Time-series sampler', () => {

  let timeSeries;

  beforeEach(() => {
    timeSeries = [
      ['2016-01-01', 10],
      ['2016-01-01', 20],
      ['2016-01-01', 30],
      ['2016-01-01', 40],
      ['2016-01-01', 50],
      ['2016-01-01', 60],
      ['2016-01-01', 70],
      ['2016-01-01', 80],
      ['2016-01-01', 90],
      ['2016-01-01', 100],
      ['2016-01-01', 110],
      ['2016-01-01', 120],
      ['2016-01-01', 130],
      ['2016-01-01', 140],
      ['2016-01-01', 150],
      ['2016-01-01', 160],
      ['2016-01-01', 170],
      ['2016-01-01', 180],
      ['2016-01-01', 190],
      ['2016-01-01', 200]
    ];
  });

  [
    {
      interval: 0,
      expected: []
    },
    {
      interval: 5,
      expected: [
        ['2016-01-01', 50],
        ['2016-01-01', 100],
        ['2016-01-01', 150],
        ['2016-01-01', 200]
      ]
    },
    {
      interval: 10,
      expected: [
        ['2016-01-01', 100],
        ['2016-01-01', 200]
      ]
    },
    {
      interval: 3,
      expected: [
        ['2016-01-01', 20],
        ['2016-01-01', 50],
        ['2016-01-01', 80],
        ['2016-01-01', 110],
        ['2016-01-01', 140],
        ['2016-01-01', 170],
        ['2016-01-01', 200]
      ]
    },
    {
      interval: 1,
      expected: [
        ['2016-01-01', 10],
        ['2016-01-01', 20],
        ['2016-01-01', 30],
        ['2016-01-01', 40],
        ['2016-01-01', 50],
        ['2016-01-01', 60],
        ['2016-01-01', 70],
        ['2016-01-01', 80],
        ['2016-01-01', 90],
        ['2016-01-01', 100],
        ['2016-01-01', 110],
        ['2016-01-01', 120],
        ['2016-01-01', 130],
        ['2016-01-01', 140],
        ['2016-01-01', 150],
        ['2016-01-01', 160],
        ['2016-01-01', 170],
        ['2016-01-01', 180],
        ['2016-01-01', 190],
        ['2016-01-01', 200]
      ]
    }
  ]
  .forEach(testCase => {
    it('interval: ' + testCase.interval, () => {
      let result = mas(timeSeries, testCase.interval);
      expect(result).toEqual(testCase.expected);
    });

  });

});
